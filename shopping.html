<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protocol | Alışveriş Listesi</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root {
            --bg: #0a0a0a;
            --surface: #141414;
            --surface-hover: #1c1c1c;
            --primary: #00df81;
            --primary-muted: rgba(0, 223, 129, 0.1);
            --text-main: #ffffff;
            --text-muted: #888888;
            --border: #262626;
            --danger: #ff4444;
            --white: #ffffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
        }

        body {
            background-color: var(--bg);
            color: var(--text-main);
            min-height: 100vh;
            padding: 2rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* --- Header --- */
        header {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-bottom: 3rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid var(--border);
            position: relative;
        }

        .logo-area h1 {
            font-size: 1.5rem;
            font-weight: 800;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .logo-area span {
            color: var(--primary);
        }

        /* --- Navigation --- */
        .nav-menu {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .nav-link {
            color: var(--text-muted);
            text-decoration: none;
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: color 0.2s;
        }

        .nav-link:hover,
        .nav-link.active {
            color: var(--primary);
        }

        .burger-btn {
            display: none;
            background: none;
            border: none;
            color: var(--text-main);
            cursor: pointer;
            padding: 0.5rem;
            z-index: 1001;
        }

        .mobile-menu {
            position: fixed;
            top: 0;
            right: -100%;
            width: 250px;
            height: 100vh;
            background: var(--surface);
            border-left: 1px solid var(--border);
            z-index: 1000;
            padding: 5rem 2rem;
            display: flex;
            flex-direction: column;
            gap: 2rem;
            transition: right 0.3s ease;
        }

        .mobile-menu.open {
            right: 0;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            z-index: 999;
        }

        .overlay.open {
            display: block;
        }

        /* --- Weekly List Layout --- */
        .weekly-grid {
            display: grid;
            grid-template-columns: 320px 1fr;
            gap: 2.5rem;
        }

        .week-picker {
            background: var(--surface);
            border: 1px solid var(--border);
        }

        .week-item {
            padding: 1.2rem 1.5rem;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.2s;
        }

        .week-item:hover {
            background: var(--surface-hover);
        }

        .week-item.active {
            background: var(--primary-muted);
            color: var(--primary);
        }

        .week-item.completed {
            color: var(--text-muted);
            opacity: 0.7;
        }

        /* --- Shopping List Content --- */
        .list-container {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .week-header {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin-bottom: 2rem;
        }

        .week-title {
            font-size: 2rem;
            font-weight: 800;
        }

        .week-date-range {
            color: var(--text-muted);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .category-section {
            margin-bottom: 2rem;
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 8px;
            overflow: hidden;
        }

        .category-header {
            background: #1a1a1a;
            padding: 1rem 1.5rem;
            font-size: 0.85rem;
            font-weight: 800;
            letter-spacing: 1px;
            color: var(--primary);
            text-transform: uppercase;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .shopping-item {
            display: grid;
            grid-template-columns: auto 1fr auto;
            align-items: center;
            gap: 1rem;
            padding: 1rem 1.5rem;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: background 0.2s;
        }

        .shopping-item:last-child {
            border-bottom: none;
        }

        .item-qty {
            font-size: 0.8rem;
            background: var(--surface-hover);
            padding: 0.2rem 0.6rem;
            border-radius: 4px;
            color: var(--text-muted);
            font-weight: 600;
            white-space: nowrap;
        }

        .shopping-item:hover {
            background: var(--surface-hover);
        }

        .shopping-item input[type="checkbox"] {
            appearance: none;
            width: 20px;
            height: 20px;
            border: 2px solid var(--border);
            border-radius: 4px;
            cursor: pointer;
            position: relative;
            background: transparent;
        }

        .shopping-item input[type="checkbox"]:checked {
            background: var(--primary);
            border-color: var(--primary);
        }

        .shopping-item input[type="checkbox"]:checked::after {
            content: "✓";
            color: var(--bg);
            font-size: 0.8rem;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: 900;
        }

        .shopping-item.checked {
            opacity: 0.4;
        }

        .item-text {
            font-size: 1rem;
            font-weight: 500;
        }

        .shopping-item.checked .item-text {
            text-decoration: line-through;
        }

        /* --- Mobile Optimization --- */
        @media (max-width: 900px) {
            body {
                padding: 1rem;
            }

            .burger-btn {
                display: block;
                position: absolute;
                top: 1rem;
                right: 1rem;
            }

            .nav-menu {
                display: none;
            }

            header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1.5rem;
                padding-top: 1rem;
                border-bottom: none;
            }

            .weekly-grid {
                grid-template-columns: 1fr;
            }

            .week-picker {
                order: 2;
            }

            .list-container {
                order: 1;
            }

            .shopping-card {
                padding: 1.5rem;
            }

            .week-title {
                font-size: 1.5rem;
            }
        }
    </style>
</head>

<body>
    <div class="overlay" id="menuOverlay"></div>
    <div class="mobile-menu" id="mobileMenu">
        <a href="index.html" class="nav-link">Diyet Planı</a>
        <a href="shopping.html" class="nav-link active">Alışveriş Listesi</a>
    </div>

    <button class="burger-btn" id="burgerBtn">
        <i data-lucide="menu"></i>
    </button>

    <div class="container">
        <header>
            <div class="logo-area">
                <h1>PROTO<span>COL</span></h1>
                <p style="font-size: 0.7rem; color: var(--text-muted); letter-spacing: 1px;">COGNITIVE PERFORMANCE / 90
                    DAYS</p>
            </div>

            <nav class="nav-menu">
                <a href="index.html" class="nav-link">Diyet Planı</a>
                <a href="shopping.html" class="nav-link active">Alışveriş Listesi</a>
            </nav>
        </header>

        <div class="weekly-grid">
            <aside class="week-picker" id="weekList">
                <!-- JS content -->
            </aside>

            <main class="list-container" id="mainContent">
                <div class="week-header">
                    <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                        <div>
                            <span class="week-date-range" id="weekRange">-- - --</span>
                            <h2 class="week-title" id="weekTitle">Hafta --</h2>
                        </div>
                        <div
                            style="background: var(--primary-muted); color: var(--primary); padding: 0.5rem 1rem; border-radius: 4px; font-size: 0.8rem; font-weight: 700;">
                            5 KİŞİLİK AİLE MODU
                        </div>
                    </div>
                </div>

                <div id="shoppingItems">
                    <!-- JS content -->
                </div>
            </main>
        </div>
    </div>

    <script>
        const appData = [
            { "gun": 1, "kahvalti": "2 haşlanmış yumurta, 3 tam ceviz içi, bol maydanoz-dereotu, az tuzlu beyaz peynir, 5 zeytin", "ogle_yemegi": "Zeytinyağlı mercimek yemeği, bol limonlu mevsim salatası", "ara_ogun": "1 porsiyon yaban mersini veya 1 adet mevsim meyvesi", "aksam_yemegi": "Izgara Levrek veya Hamsi (fırın), haşlanmış brokoli (zeytinyağı ve sarımsaklı)", "notlar": "Günde en az 2.5 litre su içilmeli." },
            { "gun": 2, "kahvalti": "Yulaf ezmesi, içine 1 tatlı kaşığı chia tohumu, tarçın ve çiğ badem", "ogle_yemegi": "Izgara tavuk göğsü, az miktar bulgur pilavı, yoğurt (kefir yerine)", "ara_ogun": "2 kare bitter çikolata (%70+ kakao)", "aksam_yemegi": "Zeytinyağlı ıspanak, üzerine sarımsaklı yoğurt", "notlar": "Zerdeçal tüketimine özen gösterin." },
            { "gun": 3, "kahvalti": "Sebzeli omlet (ıspanak veya mantar), 3 tam ceviz, tam buğday ekmeği (1 dilim)", "ogle_yemegi": "Nohut yemeği, az miktar kahverengi pirinç veya bulgur", "ara_ogun": "1 fincan yeşil çay, 10 adet çiğ fındık", "aksam_yemegi": "Fırında kabak ve havuç (zeytinyağlı), ızgara köfte (yağsız)", "notlar": "Omega-3 için ceviz kritiktir." },
            { "gun": 4, "kahvalti": "Menemen (soğanlı - beyin kan akışı için yararlı), beyaz peynir, tam tahıllı ekmek", "ogle_yemegi": "Fırında somon veya palamut, roka salatası", "ara_ogun": "Yarım avokado (limonlu ve karabiberli)", "aksam_yemegi": "Etli kuru fasulye (az yağlı), cacık (dereotu ilaveli)", "notlar": "Dereotu sinir sistemini destekler." },
            { "gun": 5, "kahvalti": "1 adet yumurta, 1 dilim tam buğday ekmeği üzerine ezilmiş avokado, ceviz", "ogle_yemegi": "Zeytinyağlı pırasa veya kereviz yemeği, yoğurt", "ara_ogun": "1 adet elma, 5-6 adet çiğ badem", "aksam_yemegi": "Izgara hindi göğsü, bol yeşil salata", "notlar": "Kereviz bilişsel sağlık için apigenin içerir." },
            { "gun": 6, "kahvalti": "Mantar ve soğanlı omlet, 5 adet zeytin, bol yeşillik", "ogle_yemegi": "Mercimek çorbası, ızgara sebze tabağı", "ara_ogun": "1 bardak domates suyu (likopen kaynağı)", "aksam_yemegi": "Fırında uskumru veya sardalya, soğanlı ve sumaklı salata", "notlar": "Soğan quercetin içerir, beyni korur." },
            { "gun": 7, "kahvalti": "Yulaf lapası (su veya bitkisel süt ile), içine kabak çekirdeği ve tarçın", "ogle_yemegi": "Zeytinyağlı taze fasulye, az bulgur, yoğurt", "ara_ogun": "3 adet kuru erik, 2 tam ceviz", "aksam_yemegi": "Haşlanmış tavuk, fırınlanmış pancar (nitrat kaynağı - kan akışını artırır)", "notlar": "Pancar bilişsel performansı destekler." },
            { "gun": 8, "kahvalti": "2 adet haşlanmış yumurta, bol lor peyniri, çörek otu, maydanoz", "ogle_yemegi": "Ton balıklı salata (mısır yerine kapari veya zeytin ile)", "ara_ogun": "1 fincan sade kahve (odaklanma için), 1 adet küçük muz", "aksam_yemegi": "Kıymalı mercimek yemeği, cacık", "notlar": "Çörek otu nöroprotektiftir." },
            { "gun": 9, "kahvalti": "Peynirli tam buğday tost, 3 tam ceviz, domates-salatalık", "ogle_yemegi": "Ispanaklı veya lorlu börek (ev yapımı, az yağlı), ayran", "ara_ogun": "10 adet çiğ antep fıstığı (tuzsuz)", "aksam_yemegi": "Izgara bonfile veya antrikot (haftada 1-2 kez), buharda kuşkonmaz veya brokoli", "notlar": "Kırmızı et B12 vitamini sağlar." },
            { "gun": 10, "kahvalti": "Yulaf ezmesi, üzerine 1 yemek kaşığı keten tohumu ve çilek/yaban mersini", "ogle_yemegi": "Zeytinyağlı bamya veya enginar, yoğurt", "ara_ogun": "2 kare bitter çikolata, yeşil tea", "aksam_yemegi": "Fırın levrek, bol yeşillikli roka salatası", "notlar": "Enginar karaciğer ve dolaylı olarak beyin sağlığı için kritiktir." },
            { "gun": 11, "kahvalti": "Dereotlu yumurta (omlet), lor peyniri, ceviz", "ogle_yemegi": "Tavuk suyu çorbası (şehriyesiz, bol etli), mevsim salatası", "ara_ogun": "1 avuç kabak çekirdeği (çinko kaynağı)", "aksam_yemegi": "Zeytinyağlı barbunya, az miktar bulgur pilavı", "notlar": "Çinko hafıza fonksiyonlarını destekler." },
            { "gun": 12, "kahvalti": "1 haşlanmış yumurta, 1 dilim süzme peynir, 5 zeytin, tam buğday ekmeği", "ogle_yemegi": "Fırın mücver (az unlu), yoğurt", "ara_ogun": "1 adet portakal veya greyfurt", "aksam_yemegi": "Izgara köfte, piyaz (bol soğanlı ve maydanozlu)", "notlar": "C vitamini beyin sisini azaltır." },
            { "gun": 13, "kahvalti": "Muzlu ve cevizli yulaf lapası, üzerine tarçın", "ogle_yemegi": "Izgara hindi salatası, ceviz içi ilaveli", "ara_ogun": "1 bardak taze sıkılmış nar suyu", "aksam_yemegi": "Zeytinyağlı karnabahar, yoğurt", "notlar": "Nar en güçlü antioksidanlardandır." },
            { "gun": 14, "kahvalti": "2 yumurtalı menemen, 3 ceviz, bol yeşillik", "ogle_yemegi": "Bulgur pilavlı yeşil mercimek (müceddere), ayran", "ara_ogun": "5 adet kuru kayısı, 5 adet çiğ fındık", "aksam_yemegi": "Fırında çipura veya mezgit, haşlanmış patates (küçük boy)", "notlar": "Haftada en az 2 gün balık şarttır." },
            { "gun": 15, "kahvalti": "Haşlanmış yumurta, beyaz peynir, avokado, tam tahıllı ekmek", "ogle_yemegi": "Zeytinyağlı yer elması veya kereviz, yoğurt", "ara_ogun": "1 fincan biberiye çayı (hafızayı canlandırır)", "aksam_yemegi": "Tavuk sote (sebzeli), bol salata", "notlar": "Biberiye kokusu ve çayı hafıza üzerinde etkilidir." },
            { "gun": 16, "kahvalti": "Çırpılmış yumurta (zerdeçallı), 3 ceviz, 5 zeytin", "ogle_yemegi": "Kırmızı mercimek çorbası, ızgara sebzeler", "ara_ogun": "1 adet kivi, 10 adet çiğ badem", "aksam_yemegi": "Fırında patlıcan (yağsız/az yağlı), cacık", "notlar": "Zerdeçal karabiber ile tüketilmelidir (emilim için)." },
            { "gun": 17, "kahvalti": "Yulaf, chia, keten tohumu ve yoğurt karışımı, üzerine ceviz", "ogle_yemegi": "Kıymalı ıspanak, üzerine sarımsaklı yoğurt", "ara_ogun": "2 kare bitter çikolata, yeşil çay", "aksam_yemegi": "Izgara somon veya hamsi tavası (az yağlı), roka", "notlar": "Düzenli uyku beslenmenin etkisini artırır." },
            { "gun": 18, "kahvalti": "Sebzeli omlet, lor peyniri, tam buğday ekmeği", "ogle_yemegi": "Nohutlu salata (haşlanmış nohut, yeşillik, ceviz)", "ara_ogun": "1 adet armut", "aksam_yemegi": "Izgara tavuk şiş, az miktar bulgur, ayran", "notlar": "Baklagiller yavaş salınımlı glikoz sağlar." },
            { "gun": 19, "kahvalti": "2 haşlanmış yumurta, 5 zeytin, 3 tam ceviz, maydanoz", "ogle_yemegi": "Zeytinyağlı taze fasulye, yoğurt", "ara_ogun": "1 avuç kabak çekirdeği", "aksam_yemegi": "Fırında kabak dizme (kıymalı), cacık", "notlar": "Kabak çekirdeği magnezyum zenginidir." },
            { "gun": 20, "kahvalti": "Peynirli omlet, 1 dilim tam buğday ekmeği, domates", "ogle_yemegi": "Mercimek yemeği, mevsim salatası", "ara_ogun": "1 fincan matcha veya normal yeşil çay", "aksam_yemegi": "Izgara levrek, bol limonlu salata", "notlar": "Limon C vitamini ve ferahlık sağlar." },
            { "gun": 21, "kahvalti": "Yulaf ezmesi, tarçın, fıstık ezmesi (şekersiz), ceviz", "ogle_yemegi": "Fırın tavuk baget, haşlanmış brokoli", "ara_ogun": "1 porsiyon çilek veya yaban mersini", "aksam_yemegi": "Zeytinyağlı pırasa, az miktar bulgur pilavı", "notlar": "Fıstık ezmesi E vitamini içerir." },
            { "gun": 22, "kahvalti": "1 yumurta, bol lor peyniri, çörek otu, tam tahıllı ekmeği", "ogle_yemegi": "Kinoa veya bulgur salatası (bol yeşillikli)", "ara_ogun": "2 tam ceviz, 3 gün kurusu kayısı", "aksam_yemegi": "Etli bezelye yemeği, cacık", "notlar": "Bezelye B1 vitamini (tiamin) kaynağıdır." },
            { "gun": 23, "kahvalti": "Zerdeçallı ve maydanozlu omlet, 5 zeytin, ceviz", "ogle_yemegi": "Izgara köfte, piyaz, ayran", "ara_ogun": "1 adet elma", "aksam_yemegi": "Fırın uskumru, bol roka and soğan salatası", "notlar": "Uskumru yüksek EPA ve DHA içerir." },
            { "gun": 24, "kahvalti": "Avokadolu ve yumurtalı tam buğday ekmeği sandviç", "ogle_yemegi": "Sebze çorbası, ızgara tavuk göğsü", "ara_ogun": "10 adet çiğ badem", "aksam_yemegi": "Zeytinyağlı enginar (garnitürlü), yoğurt", "notlar": "Enginar beyin detoksu için faydalıdır." },
            { "gun": 25, "kahvalti": "2 haşlanmış yumurta, beyaz peynir, bol dereotu, 3 ceviz", "ogle_yemegi": "Kuru fasulye (az yağlı), az bulgur pilavı", "ara_ogun": "1 fincan sade kahve, 2 kare bitter çikolata", "aksam_yemegi": "Fırın hindi, haşlanmış kuşkonmaz veya Brüksel lahanası", "notlar": "Kolin seviyenizi yumurta ile koruyun." },
            { "gun": 26, "kahvalti": "Mantar ve peynirli omlet, tam tahıllı ekmek, zeytin", "ogle_yemegi": "Ton balıklı salata, mısır yerine bol ceviz", "ara_ogun": "1 adet muz", "aksam_yemegi": "Ispanak yemeği, üzerine sarımsaklı yoğurt", "notlar": "Sarımsak nöroprotektif özelliklere sahiptir." },
            { "gun": 27, "kahvalti": "Yulaf lapası, içine kakao tozu (şekersiz), ceviz ve chia", "ogle_yemegi": "Zeytinyağlı pırasa, yoğurt, az miktar bulgur", "ara_ogun": "1 avuç kabak çekirdeği", "aksam_yemegi": "Izgara bonfile veya köfte, fırın pancar salatası", "notlar": "Kakao flavanolleri kan akışını hızlandırır." },
            { "gun": 28, "kahvalti": "Menemen, 1 dilim beyaz peynir, 3 ceviz, yeşillik", "ogle_yemegi": "Yeşil mercimek salatası (nar ekşili, cevizli)", "ara_ogun": "1 bardak domates suyu", "aksam_yemegi": "Fırın somon, haşlanmış karnabahar (zerdeçallı)", "notlar": "Haftanın son balık öğününü atlamayın." },
            { "gun": 29, "kahvalti": "2 yumurta, lor peyniri, bol maydanoz, çörek otu", "ogle_yemegi": "Izgara tavuk, mevsim salatası, ayran", "ara_ogun": "10 adet fındık, 1 fincan yeşil çay", "aksam_yemegi": "Zeytinyağlı taze fasulye, yoğurt", "notlar": "Fındık E vitamini (beyin yaşlanmasını önler) kaynağıdır." },
            { "gun": 30, "kahvalti": "Yumurta, avokado, ceviz, tam buğday ekmeği", "ogle_yemegi": "Etli nohut yemeği, cacık", "ara_ogun": "2 kare bitter çikolata, yarım muz", "aksam_yemegi": "Fırında karışık sebze (kabak, patlıcan, biber) ve ızgara köfte", "notlar": "Birinci ayı başarıyla tamamladınız." },
            { "gun": 31, "kahvalti": "2 yumurtalı biberli omlet, 4 tam ceviz, süzme peynir, maydanoz", "ogle_yemegi": "Zeytinyağlı taze fasulye, 3 yemek kaşığı bulgur, yoğurt", "ara_ogun": "1 fincan biberiye çayı, 10 adet çiğ badem", "aksam_yemegi": "Fırın levrek (biberiyeli), roka ve tere salatası", "notlar": "Biberiye kokusu ve tüketimi hafıza geri çağırma hızını destekler." },
            { "gun": 32, "kahvalti": "Yulaf ezmesi, içine 1 tatlı kaşığı keten tohumu ve dondurulmuş böğürtlen/yaban mersini", "ogle_yemegi": "Izgara hindi, bol yeşil salata (avokado ilaveli)", "ara_ogun": "1 adet portakal", "aksam_yemegi": "Kıymalı mercimek yemeği, ev yapımı yoğurt", "notlar": "Antosiyaninler (meyvelerdeki mor renk) kan-beyin bariyerini geçer." },
            { "gun": 33, "kahvalti": "Haşlanmış yumurta, lor peyniri üzerine çörek otu ve sızma zeytinyağı, tam buğday ekmeği", "ogle_yemegi": "Zeytinyağlı enginar, bol dereotu, ayran", "ara_ogun": "2 kare bitter çikolata (%80 kakao)", "aksam_yemegi": "Fırında kabak ve havuç, yanına ızgara köfte", "notlar": "Enginar karaciğer fonksiyonlarını optimize ederek beyin sisi ihtimalini düşürür." },
            { "gun": 34, "kahvalti": "Menemen (soğanlı), 3 tam ceviz, bol roka", "ogle_yemegi": "Kinoa veya ince bulgur ile hazırlanmış kısır (turşusuz), bol marul", "ara_ogun": "1 avuç kabak çekirdeği", "aksam_yemegi": "Fırında somon veya palamut, buharda brokoli", "notlar": "Magnezyum zengini kabak çekirdeği uyku kalitesini ve öğrenmeyi destekler." },
            { "gun": 35, "kahvalti": "Yulaf lapası (su ile), fıstık ezmesi (şekersiz), tarçın, çiğ fındık", "ogle_yemegi": "Izgara tavuk göğsü, mevsim salatası, 1 dilim tam tahıl ekmeği", "ara_ogun": "1 adet elma", "aksam_yemegi": "Zeytinyağlı bamya veya pırasa, yoğurt", "notlar": "Düşük glisemik indeks, gün boyu stabil beyin enerjisi sağlar." },
            { "gun": 36, "kahvalti": "2 haşlanmış yumurta, 5 zeytin, dil peyniri, domates", "ogle_yemegi": "Mercimek çorbası, haşlanmış tavuklu salata", "ara_ogun": "1 fincan yeşil çay, 2 tam ceviz", "aksam_yemegi": "Fırında uskumru, bol soğanlı ve limonlu roka salatası", "notlar": "Uskumru, beyin yapısının %60'ını oluşturan yağlar için kritik DHA kaynağıdır." },
            { "gun": 37, "kahvalti": "Mantar ve soğanlı omlet, lor peyniri, tam buğday ekmeği", "ogle_yemegi": "Etsiz nohut yemeği, az miktar bulgur pilavı, cacık (dereotlu)", "ara_ogun": "1 porsiyon yaban mersini", "aksam_yemegi": "Izgara hindi, fırın pancar dilimleri", "notlar": "Pancar içeriğindeki nitratlar beyne giden kan akışını hızlandırır." },
            { "gun": 38, "kahvalti": "Çırpılmış yumurta (zerdeçallı), 4 ceviz, yeşillik", "ogle_yemegi": "Zeytinyağlı yer elması, yoğurt", "ara_ogun": "10 adet çiğ badem", "aksam_yemegi": "Kıymalı ıspanak, üzerine sarımsaklı yoğurt", "notlar": "Ispanaktaki K vitamini bilişsel gerilemeyi yavaşlatır." },
            { "gun": 39, "kahvalti": "Yulaf ezmesi, chia tohumu, yoğurt, mevsim meyvesi", "ogle_yemegi": "Izgara köfte, bol salata, ayran", "ara_ogun": "2 kare bitter çikolata", "aksam_yemegi": "Fırın çipura, brokoli ve sarımsaklı zeytinyağı sosu", "notlar": "Sarımsak, nöronları oksidatif strese karşı korur." },
            { "gun": 40, "kahvalti": "Haşlanmış yumurta, avokado, tam tahıllı ekmek, beyaz peynir", "ogle_yemegi": "Kırmızı mercimek yemeği, mevsim salatası", "ara_ogun": "1 adet kivi", "aksam_yemegi": "Tavuk sote (sebzeli), az miktar basmati pirinç veya bulgur", "notlar": "Kivi, serotonin öncülü olarak zihinsel dengeyi destekler." },
            { "gun": 41, "kahvalti": "Peynirli tam buğday tost (yağsız), 5 zeytin, 3 ceviz", "ogle_yemegi": "Zeytinyağlı bakla veya taze fasulye, yoğurt", "ara_ogun": "1 fincan sade kahve (kafein + polifenol)", "aksam_yemegi": "Fırında palamut, roka salatası", "notlar": "Haftada en az 2 gün yağlı balık tüketimi kuralı devam etmeli." },
            { "gun": 42, "kahvalti": "2 yumurta ile menemen, bol dereotu, lor peyniri", "ogle_yemegi": "Izgara tavuk salatası, ceviz içi ilaveli", "ara_ogun": "1 avuç kabak çekirdeği", "aksam_yemegi": "Zeytinyağlı karnabahar, yoğurt (zerdeçal eklenmiş)", "notlar": "Zerdeçal ve yoğurt kombinasyonu enflamasyonu düşürür." },
            { "gun": 43, "kahvalti": "Yulaf lapası, keten tohumu, fındık, tarçın", "ogle_yemegi": "Yeşil mercimek yemeği, bol limonlu salata", "ara_ogun": "1 adet armut", "aksam_yemegi": "Fırın köfte, haşlanmış Brüksel lahanası veya kuşkonmaz", "notlar": "B12 ve demir seviyeleri için kırmızı et (köfte/bonfile) haftada 2 kez önemlidir." },
            { "gun": 44, "kahvalti": "Haşlanmış yumurta, süzme peynir, 4 ceviz, maydanoz-nane", "ogle_yemegi": "Zeytinyağlı kereviz (portakal sulu), yoğurt", "ara_ogun": "10 adet çiğ antep fıstığı", "aksam_yemegi": "Izgara somon, roka ve kırmızı soğan salatası", "notlar": "Kırmızı soğan, hafıza koruyucu quercetin içerir." },
            { "gun": 45, "kahvalti": "Zerdeçallı omlet, tam buğday ekmeği, 5 zeytin", "ogle_yemegi": "Izgara hindi, az bulgur pilavı, ayran", "ara_ogun": "2 kare bitter çikolata", "aksam_yemegi": "Zeytinyağlı ıspanak, yoğurt", "notlar": "Hindi eti, odaklanma için gerekli olan tirozin amino asidini sağlar." },
            { "gun": 46, "kahvalti": "Yulaf ezmesi, yoğurt, çiğ badem, yaban mersini", "ogle_yemegi": "Mercimek çorbası, lor peynirli salata", "ara_ogun": "1 adet muz", "aksam_yemegi": "Fırın levrek, haşlanmış patates (orta boy)", "notlar": "Kompleks karbonhidratlar beynin ana yakıtıdır." },
            { "gun": 47, "kahvalti": "2 yumurta, beyaz peynir, 3 ceviz, domates, biber", "ogle_yemegi": "Zeytinyağlı barbunya, mevsim salatası", "ara_ogun": "1 fincan yeşil çay", "aksam_yemegi": "Izgara tavuk şiş, fırın sebze (kabak, patlıcan)", "notlar": "Baklagillerdeki lifler bağırsak-beyin aksını destekler." },
            { "gun": 48, "kahvalti": "Avokadolu ve yumurtalı tam buğday tost, yeşillik", "ogle_yemegi": "Ton balıklı salata (bol yeşillikli, mısırsız)", "ara_ogun": "1 avuç kabak çekirdeği", "aksam_yemegi": "Etli bezelye yemeği, cacık", "notlar": "Bezelye, sinir iletimi için gerekli olan B1 vitamini içerir." },
            { "gun": 49, "kahvalti": "Yulaf lapası, fıstık ezmesi, ceviz, chia tohumu", "ogle_yemegi": "Zeytinyağlı enginar, yoğurt", "ara_ogun": "1 adet portakal", "aksam_yemegi": "Fırın uskumru, bol roka salatası", "notlar": "Dengeli C vitamini alımı, oksidatif hasarı önler." },
            { "gun": 50, "kahvalti": "2 yumurta (haşlanmış), 5 zeytin, lor peyniri, çörek otu", "ogle_yemegi": "Kıymalı ıspanak, az bulgur, ayran", "ara_ogun": "2 kare bitter çikolata", "aksam_yemegi": "Izgara hindi, buharda brokoli ve havuç", "notlar": "50. günde beyin fonksiyonlarında berraklık artışı gözlenmelidir." },
            { "gun": 51, "kahvalti": "Mantar ve süzme peynirli omlet, 4 ceviz, yeşillik", "ogle_yemegi": "Nohut yemeği, mevsim salatası", "ara_ogun": "1 fincan sade kahve", "aksam_yemegi": "Fırın çipura, soğanlı roka salatası", "notlar": "Kafein, kısa süreli hafıza performansını optimize eder." },
            { "gun": 52, "kahvalti": "Yulaf, yoğurt, keten tohumu, çiğ badem", "ogle_yemegi": "Izgara köfte, bol salata, 1 dilim tam buğday ekmeği", "ara_ogun": "1 adet elma", "aksam_yemegi": "Zeytinyağlı taze fasulye, yoğurt", "notlar": "Akşam yemeğinde hafif beslenme, gece nöronal onarımı kolaylaştırır." },
            { "gun": 53, "kahvalti": "Haşlanmış yumurta, beyaz peynir, avokado, tam tahıllı ekmek", "ogle_yemegi": "Zeytinyağlı kereviz, ayran", "ara_ogun": "10 adet çiğ fındık", "aksam_yemegi": "Fırın tavuk, haşlanmış karnabahar (limonlu)", "notlar": "Karnabahar, hafıza için önemli olan kolin bileşiğini içerir." },
            { "gun": 54, "kahvalti": "2 yumurtalı menemen, 3 ceviz, bol roka", "ogle_yemegi": "Kırmızı mercimek yemeği, mevsim salatası", "ara_ogun": "1 avuç kabak çekirdeği", "aksam_yemegi": "Izgara somon, buharda kuşkonmaz veya brokoli", "notlar": "Kuşkonmaz folat zenginidir; beyin yaşlanmasına karşı direnç sağlar." },
            { "gun": 55, "kahvalti": "Yulaf lapası, chia, tarçın, dondurulmuş meyve", "ogle_yemegi": "Izgara hindi, az miktar bulgur, yoğurt", "ara_ogun": "2 kare bitter çikolata", "aksam_yemegi": "Zeytinyağlı bamya, bol salata", "notlar": "Zengin lif içeriği bağırsak mikrobiyotasını (beyin ortağı) korur." },
            { "gun": 56, "kahvalti": "2 haşlanmış yumurta, lor peyniri, 4 ceviz, maydanoz", "ogle_yemegi": "Zeytinyağlı enginar, cacık", "ara_ogun": "1 adet kivi", "aksam_yemegi": "Izgara levrek veya palamut, roka salatası", "notlar": "Yüksek Omega-3 alımı sinaptik hızı artırır." },
            { "gun": 57, "kahvalti": "Peynirli omlet, 5 zeytin, tam buğday ekmeği, domates", "ogle_yemegi": "Mercimek çorbası, haşlanmış tavuklu salata", "ara_ogun": "10 adet çiğ badem", "aksam_yemegi": "Kıymalı ıspanak, yoğurt", "notlar": "Demir eksikliği konsantrasyon kaybına yol açar; ıspanak + et önemlidir." },
            { "gun": 58, "kahvalti": "Yulaf, yoğurt, fındık, keten tohumu", "ogle_yemegi": "Izgara köfte, bol salata, ayran", "ara_ogun": "1 adet portakal", "aksam_yemegi": "Zeytinyağlı taze fasulye, 2 kaşık bulgur", "notlar": "Portakal flavonoidleri hafıza fonksiyonunu keskinleştirir." },
            { "gun": 59, "kahvalti": "2 yumurta (zerdeçallı çırpılmış), 3 ceviz, yeşillik", "ogle_yemegi": "Nohut salatası (bol yeşillikli), tam tahıllı ekmek", "ara_ogun": "1 fincan yeşil çay", "aksam_yemegi": "Fırın uskumru, bol soğan ve roka", "notlar": "Uskumru içeriğindeki B12 sinir kılıflarını (miyelin) onarır." },
            { "gun": 60, "kahvalti": "Avokadolu yumurtalı tam buğday tost, beyaz peynir, zeytin", "ogle_yemegi": "Zeytinyağlı kereviz, yoğurt", "ara_ogun": "1 avuç kabak çekirdeği, 2 kare bitter çikolata", "aksam_yemegi": "Etli mercimek yemeği, cacık", "notlar": "60. gün sonunda dopamin dengesi ve odaklanma süresi stabil hale gelir." },
            { "gun": 61, "kahvalti": "2 haşlanmış yumurta, 4 tam ceviz, bol dereotu ve maydanoz, lor peyniri", "ogle_yemegi": "Zeytinyağlı taze fasulye, 3 yemek kaşığı bulgur, yoğurt", "ara_ogun": "1 fincan biberiye çayı, 10 adet çiğ badem", "aksam_yemegi": "Izgara Levrek, roka ve kırmızı soğan salatası", "notlar": "Biberiye, asetilkolin parçalanmasını önleyerek hafızayı destekler." },
            { "gun": 62, "kahvalti": "Yulaf ezmesi, chia tohumu, dondurulmuş yaban mersini, tarçın", "ogle_yemegi": "Izgara hindi göğsü, mevsim salatası, ayran", "ara_ogun": "1 adet elma, 2 tam ceviz", "aksam_yemegi": "Zeytinyağlı pırasa, 1 dilim tam buğday ekmeği, yoğurt", "notlar": "Hindi eti, motivasyon hormonu dopamin için gerekli olan tirozini sağlar." },
            { "gun": 63, "kahvalti": "Zerdeçallı omlet, 5 zeytin, beyaz peynir, domates-biber", "ogle_yemegi": "Nohut yemeği (etli veya etsiz), az miktar bulgur, cacık", "ara_ogun": "2 kare bitter çikolata (%80 kakao)", "aksam_yemegi": "Fırında sebze dizme (kabak, patlıcan, biber), sarımsaklı yoğurt", "notlar": "Zerdeçal ve karabiber kombinasyonu nöro-enflamasyonu azaltır." },
            { "gun": 64, "kahvalti": "Haşlanmış yumurta, avokado (çeyrek), tam tahıllı ekmek, yeşillik", "ogle_yemegi": "Ton balıklı salata (yeşillik ve ceviz ağırlıklı)", "ara_ogun": "1 avuç kabak çekirdeği", "aksam_yemegi": "Fırın uskumru veya sardalya, bol roka salatası", "notlar": "Haftada 2-3 kez yağlı balık tüketimi miyelin kılıf sağlığı için kritiktir." },
            { "gun": 65, "kahvalti": "Yulaf lapası, fıstık ezmesi (şekersiz), keten tohumu, çiğ fındık", "ogle_yemegi": "Zeytinyağlı enginar, yoğurt, az miktar esmer pirinç veya bulgur", "ara_ogun": "1 adet portakal veya kivi", "aksam_yemegi": "Izgara tavuk şiş, haşlanmış brokoli (sarımsaklı zeytinyağı ile)", "notlar": "C vitamini beyindeki oksidatif stresi temizler." },
            { "gun": 66, "kahvalti": "2 yumurtalı menemen, 3 ceviz, lor peyniri, nane", "ogle_yemegi": "Kırmızı mercimek çorbası, ızgara köfte, bol salata", "ara_ogun": "1 fincan yeşil çay, 5-6 adet çiğ kaju", "aksam_yemegi": "Ispanak yemeği, yoğurt", "notlar": "Ispanak ve yeşil yapraklı sebzeler K vitamini deposudur." },
            { "gun": 67, "kahvalti": "Peynirli tam buğday tost, 5 zeytin, 3 ceviz, salatalık", "ogle_yemegi": "Zeytinyağlı barbunya, mevsim salatası, ayran", "ara_ogun": "1 adet muz (küçük boy)", "aksam_yemegi": "Fırın somon veya çipura, kuşkonmaz veya fırın patates (küçük)", "notlar": "Somondaki astaksantin maddesi beyin hücrelerini korur." },
            { "gun": 68, "kahvalti": "Mantar ve soğanlı omlet, beyaz peynir, bol maydanoz", "ogle_yemegi": "Sebzeli hindi sote, az bulgur, yoğurt", "ara_ogun": "10 adet çiğ badem", "aksam_yemegi": "Zeytinyağlı kereviz, bol dereotu, cacık", "notlar": "Kereviz, sinir sistemini yatıştıran apigenin bileşiği içerir." },
            { "gun": 69, "kahvalti": "Haşlanmış yumurta, avokado, tam tahıllı ekmek, çörek otu", "ogle_yemegi": "Etli mercimek yemeği, mevsim salatası", "ara_ogun": "2 kare bitter çikolata", "aksam_yemegi": "Izgara levrek, bol yeşil salata", "notlar": "Çörek otu, antienflamatuar etkisiyle bilişsel hızı artırabilir." },
            { "gun": 70, "kahvalti": "Yulaf ezmesi, yoğurt, ceviz, dondurulmuş meyve", "ogle_yemegi": "Fırın mücver (az unlu), beyaz peynir, ayran", "ara_ogun": "1 fincan sade kahve", "aksam_yemegi": "Izgara bonfile veya köfte, buharda sebzeler", "notlar": "Kırmızı et, sinir iletimi için elzem olan B12 vitamini kaynağıdır." },
            { "gun": 71, "kahvalti": "2 yumurta, lor peyniri, bol yeşillik, 4 ceviz", "ogle_yemegi": "Zeytinyağlı taze fasulye, yoğurt, 1 dilim ekmek", "ara_ogun": "1 avuç kabak çekirdeği", "aksam_yemegi": "Fırında uskumru, roka and soğan salatası", "notlar": "Kabak çekirdeği magnezyum ve çinko zenginidir." },
            { "gun": 72, "kahvalti": "Sebzeli omlet, 5 zeytin, beyaz peynir, domates", "ogle_yemegi": "Izgara tavuk salatası (ceviz ve elma dilimli)", "ara_ogun": "1 adet armut", "aksam_yemegi": "Kıymalı ıspanak, yoğurt", "notlar": "Demir eksikliği bilişsel yorgunluğun ana sebebidir." },
            { "gun": 73, "kahvalti": "Yulaf lapası, keten tohumu, fıstık ezmesi, tarçın", "ogle_yemegi": "Nohut yemeği, az bulgur, cacık", "ara_ogun": "2 kare bitter çikolata", "aksam_yemegi": "Izgara somon veya levrek, roka salatası", "notlar": "Tarçın kan şekerini dengeleyerek odaklanma süresini uzatır." },
            { "gun": 74, "kahvalti": "2 yumurtalı menemen, beyaz peynir, 3 ceviz", "ogle_yemegi": "Zeytinyağlı enginar, yoğurt, mevsim salatası", "ara_ogun": "10 adet çiğ antep fıstığı", "aksam_yemegi": "Fırın tavuk, fırın pancar ve havuç", "notlar": "Pancardaki nitratlar beyne oksijen taşıyan kan akışını artırır." },
            { "gun": 75, "kahvalti": "Haşlanmış yumurta, lor peyniri, çörek otu, tam buğday ekmeği", "ogle_yemegi": "Kırmızı mercimek yemeği, ayran, bol salata", "ara_ogun": "1 adet kivi", "aksam_yemegi": "Izgara köfte, piyaz (bol soğan ve maydanozlu)", "notlar": "Piyazdaki soğan ve maydanoz, güçlü flavonoid kaynaklarıdır." },
            { "gun": 76, "kahvalti": "Yulaf ezmesi, yoğurt, ceviz, chia", "ogle_yemegi": "Zeytinyağlı taze fasulye, yoğurt, az miktar bulgur", "ara_ogun": "1 fincan biberiye çayı", "aksam_yemegi": "Fırın palamut veya uskumru, bol roka salatası", "notlar": "Uskumru Omega-3 içeriği en yüksek balıklardandır." },
            { "gun": 77, "kahvalti": "Zerdeçallı omlet, 5 zeytin, peynir, yeşillik", "ogle_yemegi": "Izgara hindi, mevsim salatası, ayran", "ara_ogun": "1 adet elma, 2 tam ceviz", "aksam_yemegi": "Zeytinyağlı bamya, yoğurt, 1 dilim tam buğday ekmeği", "notlar": "Hindi eti, triptofan (serotonin öncülü) kaynağıdır." },
            { "gun": 78, "kahvalti": "Haşlanmış yumurta, avokado, lor peyniri, tam tahıllı ekmek", "ogle_yemegi": "Etsiz nohut yemeği, cacık, bol yeşillik", "ara_ogun": "2 kare bitter çikolata", "aksam_yemegi": "Tavuk sote, haşlanmış karnabahar (zerdeçallı)", "notlar": "Karnabahar, hafıza için kritik olan kolin içerir." },
            { "gun": 79, "kahvalti": "Mantar ve peynirli omlet, 3 ceviz, domates-biber", "ogle_yemegi": "Zeytinyağlı kereviz, yoğurt, az miktar bulgur", "ara_ogun": "1 avuç kabak çekirdeği", "aksam_yemegi": "Fırın somon, roka ve tere salatası", "notlar": "Magnezyum eksikliği unutkanlığa yol açabilir." },
            { "gun": 80, "kahvalti": "Yulaf lapası, fıstık ezmesi, çiğ fındık, tarçın", "ogle_yemegi": "Izgara köfte, bol salata, ayran", "ara_ogun": "1 adet portakal", "aksam_yemegi": "Zeytinyağlı ıspanak, yoğurt", "notlar": "E vitamini (fındık) nöronları yaşlanmaya karşı korur." },
            { "gun": 81, "kahvalti": "2 yumurta (haşlanmış), beyaz peynir, 4 ceviz, yeşillik", "ogle_yemegi": "Kırmızı mercimek yemeği, mevsim salatası, 1 dilim ekmek", "ara_ogun": "1 fincan yeşil çay", "aksam_yemegi": "Izgara levrek veya palamut, bol soğan ve roka", "notlar": "Soğan, beyindeki hipokampus bölgesini oksidasyondan korur." },
            { "gun": 82, "kahvalti": "Sebzeli omlet, 5 zeytin, beyaz peynir, domates", "ogle_yemegi": "Zeytinyağlı enginar, yoğurt, ayran", "ara_ogun": "10 adet çiğ badem", "aksam_yemegi": "Fırın tavuk, haşlanmış sebzeler", "notlar": "Enginar, sinir iletimi üzerinde dolaylı olumlu etkiye sahiptir." },
            { "gun": 83, "kahvalti": "Yulaf, yoğurt, keten tohumu, dondurulmuş meyve", "ogle_yemegi": "Izgara hindi salatası, ceviz içi ilaveli", "ara_ogun": "2 kare bitter çikolata", "aksam_yemegi": "Kıymalı mercimek yemeği, cacık", "notlar": "Keten tohumu bitkisel Omega-3 (ALA) kaynağıdır." },
            { "gun": 84, "kahvalti": "2 yumurtalı menemen, 3 ceviz, peynir, nane", "ogle_yemegi": "Zeytinyağlı taze fasulye, yoğurt, az bulgur", "ara_ogun": "1 adet kivi", "aksam_yemegi": "Izgara somon veya uskumru, roka salatası", "notlar": "Kivi, serotonin sentezini destekleyen B6 vitamini içerir." },
            { "gun": 85, "kahvalti": "Haşlanmış yumurta, avokado, tam tahıllı ekmek, çörek otu", "ogle_yemegi": "Nohut yemeği, bol salata, ayran", "ara_ogun": "1 fincan sade kahve, 5 çiğ fındık", "aksam_yemegi": "Fırın köfte, haşlanmış brokoli ve karnabahar", "notlar": "Kafein, kısa süreli işleme hafızasını güçlendirir." },
            { "gun": 86, "kahvalti": "Yulaf lapası, fıstık ezmesi, ceviz, tarçın", "ogle_yemegi": "Sebzeli hindi sote, yoğurt, mevsim salatası", "ara_ogun": "1 avuç kabak çekirdeği", "aksam_yemegi": "Zeytinyağlı pırasa, yoğurt", "notlar": "Sülfürlü sebzeler (pırasa) beyin detoksu için faydalıdır." },
            { "gun": 87, "kahvalti": "Zerdeçallı omlet, peynir, 5 zeytin, yeşillik", "ogle_yemegi": "Kıymalı ıspanak, yoğurt, 1 dilim ekmek", "ara_ogun": "1 adet portakal", "aksam_yemegi": "Izgara levrek, bol yeşil salata", "notlar": "Dengeli C vitamini bilişsel performansı sürdürülebilir kılar." },
            { "gun": 88, "kahvalti": "Haşlanmış yumurta, beyaz peynir, 4 ceviz, dereotu", "ogle_yemegi": "Zeytinyağlı barbunya, mevsim salatası, ayran", "ara_ogun": "2 kare bitter çikolata", "aksam_yemegi": "Fırın tavuk, fırın pancar ve kabak", "notlar": "Pancardaki betalainler nöronal koruma sağlar." },
            { "gun": 89, "kahvalti": "Yulaf ezmesi, yoğurt, chia, yaban mersini", "ogle_yemegi": "Izgara köfte, piyaz, bol maydanoz", "ara_ogun": "1 fincan yeşil çay", "aksam_yemegi": "Fırın uskumru veya sardalya, roka salatası", "notlar": "Maksimum Omega-3 yüklemesi için son günler önemlidir." },
            { "gun": 90, "kahvalti": "2 yumurta, avokado, peynir, 3 ceviz, tam tahıllı ekmek", "ogle_yemegi": "Zeytinyağlı enginar, bol yoğurt, mevsim salatası", "ara_ogun": "1 adet elma, 1 avuç kabak çekirdeği, 2 kare bitter çikolata", "aksam_yemegi": "Izgara bonfile, haşlanmış brokoli, bol roka", "notlar": "90 günlük program tamamlandı; zihinsel netlik maksimize edilmiştir." }
        ];


        const ShoppingApp = {
            state: {
                startDate: localStorage.getItem('protocol_start') || '2026-01-12',
                currentWeek: 1,
                checkedItems: JSON.parse(localStorage.getItem('protocol_shopping_checked') || '{}'),
                familySize: 5
            },

            dictionary: {
                "manav": ["maydanoz", "dereotu", "nane", "roka", "marul", "salata", "domates", "salatalık", "biber", "soğan", "sarımsak", "patates", "havuç", "kabak", "patlıcan", "brokoli", "karnabahar", "pırasa", "kereviz", "enginar", "ıspanak", "meyve", "elma", "muz", "portakal", "kivi", "çilek", "yaban mersini", "limon", "avokado", "pancar", "kuşkonmaz", "tere", "turp", "mantar", "armut", "yeşil soğan", "semizotu", "yer elması", "kavun", "karpuz", "üzüm", "nar", "börülce", "fasulye", "bakla", "bezelye", "bamya", "brüksel lahanası", "taze", "yeşillik", "sebze"],
                "kasap": ["yumurta", "peynir", "lor", "çökelek", "kaşar", "zeytin", "levrek", "tavuk", "et", "köfte", "balık", "somon", "hamsi", "palamut", "uskumru", "hindi", "yoğurt", "ayran", "süt", "kefir", "bonfile", "antrikot", "kıyma", "tava", "şiş", "baget", "göğüs", "sardalya", "çipura", "ton balığı", "dil peyniri", "süzme peynir", "beyaz peynir", "dana"],
                "market": ["ceviz", "badem", "fındık", "fıstık", "kaju", "kabak çekirdeği", "keten tohumu", "chia", "yulaf", "mercimek", "nohut", "barbunya", "bulgur", "pirinç", "makarna", "ekmek", "yağ", "zeytinyağı", "çay", "kahve", "çikolata", "su", "kakao", "tarçın", "pul biber", "karabiber", "kimyon", "zerdeçal", "tuz", "sirke", "sos", "kuruyemiş", "kuru kayısı", "kuru erik", "gün kurusu", "mısır", "galeta", "susam", "un"]
            },

            init() {
                this.setupNavigation();
                this.calculateCurrentWeek();
                this.render();
                lucide.createIcons();
            },

            setupNavigation() {
                const burgerBtn = document.getElementById('burgerBtn');
                const mobileMenu = document.getElementById('mobileMenu');
                const overlay = document.getElementById('menuOverlay');

                const toggleMenu = () => {
                    mobileMenu.classList.toggle('open');
                    overlay.classList.toggle('open');
                    const isOpen = mobileMenu.classList.contains('open');
                    burgerBtn.innerHTML = isOpen ? '<i data-lucide="x"></i>' : '<i data-lucide="menu"></i>';
                    lucide.createIcons();
                };

                burgerBtn.onclick = toggleMenu;
                overlay.onclick = toggleMenu;
            },

            calculateCurrentWeek() {
                const s = new Date(this.state.startDate);
                const n = new Date();
                const diff = Math.floor((n - s) / (7 * 86400000)) + 1;
                this.state.currentWeek = Math.min(Math.max(1, diff), 13);
            },

            getWeekDays(weekNum) {
                const startDay = (weekNum - 1) * 7;
                return Array.from({length: 7}, (_, i) => appData[startDay + i]).filter(Boolean);
            },

            parseItem(text) {
                text = text.toLowerCase().trim();
                let qty = 0;
                let unit = '';
                let name = text;

                // 1. Miktar Ayrıştırma
                const numMatch = text.match(/^([\d.,]+)\s*(.*)/);
                if (numMatch) {
                    qty = parseFloat(numMatch[1].replace(',', '.'));
                    name = numMatch[2];
                }

                // 2. Birim ve Kelime Temizliği
                if (name.includes('gr') || name.includes('gram')) { 
                    unit = 'Gr'; 
                    name = name.replace(/gram|gr/g, ''); 
                    qty = qty || 100;
                }
                else if (name.includes('kg') || name.includes('kilo')) { 
                    unit = 'Kg'; 
                    name = name.replace(/kilo|kg/g, ''); 
                    qty = qty || 1;
                }
                else if (name.includes('litre') || name.includes('lt')) { 
                    unit = 'Lt'; 
                    name = name.replace(/litre|lt/g, ''); 
                    qty = qty || 1;
                }
                else if (name.includes('kaşık')) { 
                    unit = 'Kaşık'; 
                    name = name.replace(/yemek|tatlı|çay|kaşığı|kaşık/g, ''); 
                    qty = qty || 1;
                }
                else if (name.includes('bardak') || name.includes('fincan')) { 
                    unit = 'Br/Fn'; 
                    name = name.replace(/bardak|fincan/g, ''); 
                    qty = qty || 1;
                }
                else if (name.includes('dilim')) { 
                    unit = 'Dilim'; 
                    name = name.replace('dilim', ''); 
                    qty = qty || 1;
                }
                else if (name.includes('adet') || name.includes('tane')) { 
                    unit = 'Adet'; 
                    name = name.replace(/adet|tane/g, ''); 
                    qty = qty || 1;
                }
                else if (name.includes('demet') || name.includes('bağ')) { 
                    unit = 'Demet'; 
                    name = name.replace(/demet|bağ/g, ''); 
                    qty = qty || 1;
                }
                else if (name.includes('avuç') || name.includes('avuc')) { 
                    unit = 'Avuç'; 
                    name = name.replace(/avuc|avuç/g, ''); 
                    qty = qty || 1;
                }
                else if (name.includes('kare')) { 
                    unit = 'Adet'; 
                    name = name.replace('kare', ''); 
                    qty = qty || 1;
                }
                else if (name.includes('paket')) {
                    unit = 'Paket';
                    name = name.replace('paket', '');
                    qty = qty || 1;
                }
                else {
                    if (qty > 0) unit = 'Adet';
                    else {
                        qty = 0.5; // Varsayılan
                        unit = 'Porsiyon'; 
                    }
                }

                // 3. İsim Temizliği
                name = name.replace(/bol|az|tuzlu|tuzsuz|haşlanmış|ızgara|fırın|çiğ|tam|yarım|veya|\d+|suyu|içi/g, '').trim();
                name = name.replace(/^\W+|[()]/g, '');

                // 4. Kategori
                let category = 'market';
                let matchName = name;
                
                let found = false;
                for (const [cat, tags] of Object.entries(this.dictionary)) {
                    for (const tag of tags) {
                        if (name.includes(tag)) {
                            category = cat;
                            // Standardize et
                            matchName = tag; 
                            found = true;
                            break;
                        }
                    }
                    if (found) break;
                }
                
                if (!matchName || matchName.length < 2) return null;

                return { qty, unit, name: matchName, category, raw: text };
            },

            calculateList(days) {
                const rawList = [];
                days.forEach(day => {
                   const meals = [day.kahvalti, day.ogle_yemegi, day.ara_ogun, day.aksam_yemegi];
                   meals.forEach(mealStr => {
                       if(!mealStr) return;
                       const items = mealStr.split(/[,/]+/).map(s => s.replace(/\(.*\)/g, '').trim());
                       items.forEach(item => {
                           if(item.length > 2) {
                               const parsed = this.parseItem(item);
                               if (parsed) rawList.push(parsed);
                           }
                       });
                   });
                });

                const grouped = {};
                rawList.forEach(item => {
                    let key = item.name;
                    if(key.length > 0) key = key.charAt(0).toUpperCase() + key.slice(1);

                    if (!grouped[key]) {
                        grouped[key] = {
                            name: key,
                            totalQty: 0,
                            unit: item.unit,
                            category: item.category
                        };
                    }
                    grouped[key].totalQty += item.qty;
                    if (item.unit === 'Kg' || item.unit === 'Lt') grouped[key].unit = item.unit;
                });

                const final = Object.values(grouped).map(item => {
                    let q = item.totalQty * this.state.familySize;
                    let u = item.unit;

                    if (['tuz', 'baharat', 'su', 'çay', 'kahve', 'sirke', 'sos'].some(x => item.name.toLowerCase().includes(x))) {
                        q = 0; u = 'İhtiyaç kadar';
                    }
                    else if (item.name.toLowerCase().includes('yumurta')) {
                        u = 'Adet';
                        q = Math.ceil(q);
                    }
                    else if (item.name.toLowerCase().includes('ekmek')) {
                        if (u === 'Dilim' && q > 12) {
                            q = Math.ceil(q / 15);
                            u = 'Paket/Tam';
                        }
                    }
                    
                    return { ...item, q, u };
                }).filter(x => x.name.length > 1);

                return final;
            },

            render() {
                this.renderWeeks();
                this.renderContent();
                lucide.createIcons();
            },

            renderWeeks() {
                const list = document.getElementById('weekList');
                list.innerHTML = '';
                for (let i = 1; i <= 13; i++) {
                    const item = document.createElement('div');
                    item.className = `week-item ${this.state.currentWeek === i ? 'active' : ''}`;
                    item.innerHTML = `
                        <span>Hafta ${i}</span>
                        ${this.state.currentWeek > i ? '<i data-lucide="check" style="width:14px; color: var(--primary)"></i>' : '<i data-lucide="chevron-right" style="width:14px"></i>'}
                    `;
                    item.onclick = () => {
                        this.state.currentWeek = i;
                        this.render();
                    };
                    list.appendChild(item);
                }
            },

            renderContent() {
                const weekNum = this.state.currentWeek;
                const days = this.getWeekDays(weekNum);
                
                const s = new Date(this.state.startDate);
                s.setDate(s.getDate() + (weekNum - 1) * 7);
                const e = new Date(s);
                e.setDate(e.getDate() + 6);
                const format = (d) => d.toLocaleDateString('tr-TR', { day: 'numeric', month: 'short' });
                document.getElementById('weekRange').textContent = `${format(s)} - ${format(e)}`;
                document.getElementById('weekTitle').textContent = `Hafta ${weekNum} Listesi`;

                const shoppingData = this.calculateList(days);
                const container = document.getElementById('shoppingItems');
                container.innerHTML = '';

                const weekKey = `week_${weekNum}_fam5`;
                if (!this.state.checkedItems[weekKey]) this.state.checkedItems[weekKey] = {};

                const cats = {
                    'manav': { title: 'MANAV / PAZAR', icon: 'carrot', items: [] },
                    'kasap': { title: 'KASAP / ŞARKÜTERİ', icon: 'beef', items: [] },
                    'market': { title: 'MARKET / DİĞER', icon: 'shopping-basket', items: [] }
                };

                shoppingData.forEach(item => {
                    if(cats[item.category]) cats[item.category].items.push(item);
                    else cats['market'].items.push(item);
                });

                Object.values(cats).forEach(cat => {
                    if(cat.items.length === 0) return;
                    cat.items.sort((a,b) => a.name.localeCompare(b.name));

                    const section = document.createElement('div');
                    section.className = 'category-section';
                    
                    let html = '';
                    cat.items.forEach(ing => {
                        const isChecked = this.state.checkedItems[weekKey][ing.name] || false;
                        let qtyStr = ing.u;
                        if (ing.q > 0) { 
                            const val = Number.isInteger(ing.q) ? ing.q : ing.q.toFixed(1).replace('.0', '');
                            qtyStr = `${val} ${ing.u}`;
                        }
                        
                        html += `
                            <div class="shopping-item ${isChecked ? 'checked' : ''}" onclick="ShoppingApp.toggle('${weekKey}', '${ing.name}')">
                                <input type="checkbox" ${isChecked ? 'checked' : ''}>
                                <span class="item-text">${ing.name}</span>
                                <span class="item-qty">${qtyStr}</span>
                            </div>
                        `;
                    });

                    section.innerHTML = `
                        <div class="category-header"><i data-lucide="${cat.icon}" style="width:16px"></i> ${cat.title}</div>
                        <div>${html}</div>
                    `;
                    container.appendChild(section);
                });

                if(shoppingData.length === 0) container.innerHTML = '<p style="color:#666">Veri yok</p>';
                lucide.createIcons();
            },

            toggle(weekKey, name) {
                const isCheckbox = window.event.target.type === 'checkbox';
                let newState = isCheckbox ? window.event.target.checked : !this.state.checkedItems[weekKey][name];
                
                this.state.checkedItems[weekKey][name] = newState;
                localStorage.setItem('protocol_shopping_checked', JSON.stringify(this.state.checkedItems));
                this.renderContent();
            }
        };

        ShoppingApp.init();
    </script>
</body>
</html>
